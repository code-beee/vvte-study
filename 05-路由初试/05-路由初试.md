[TOC]

# è·¯ç”±åˆè¯•

## ğŸ¯ ç›®æ ‡

- å®ç°åµŒå¥—è·¯ç”±ï¼Œè·¯ç”±è·³è½¬æ—¶åªé‡æ–°æ¸²æŸ“å­è·¯ç”±æŒ‡å‘çš„è§†å›¾ã€‚
- å®ç°è®¿é—® `/` ï¼ˆæ ¹è·¯å¾„ï¼‰æ˜¾ç¤ºçš„æ˜¯ `/home` ï¼ˆåå°é¦–é¡µï¼‰ã€‚

## ğŸ˜´ åŠŸè¯¾

å®é™…ç”Ÿæ´»ä¸­çš„åº”ç”¨ç•Œé¢ï¼Œé€šå¸¸ç”±å¤šå±‚åµŒå¥—çš„ç»„ä»¶ç»„åˆè€Œæˆã€‚ä¾‹å¦‚åå°ç®¡ç†ç³»ç»Ÿ `layout` ï¼ˆå¸ƒå±€ï¼‰ä¸€èˆ¬ç”± navbarã€sidebarã€contentã€footer ç»„æˆï¼Œå¸ƒå±€ç¤ºæ„å›¾å¦‚ä¸‹ï¼š

<img src="./resources/layout.png" alt="layout" style="zoom:100%;" />

é™¤äº† content å¤–ï¼Œå…¶å®ƒä¸‰ä¸ªåŒºåŸŸçš„å†…å®¹ä¸€èˆ¬ä¸ä¼šå˜åŠ¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨`åµŒå¥—è·¯ç”±`ï¼Œå°† content è®¾ä¸ºåµŒå¥—è·¯ç”±ä¸­çš„å­è·¯ç”±ï¼Œå³è·¯ç”±è§†å›¾å‡ºå£ã€‚è¿™æ ·æ¯æ¬¡è·¯ç”±å˜åŒ–åªä¼šé‡æ–°æ¸²æŸ“ content ã€‚

ä¸‹é¢æ˜¯è¯·æ±‚â€œåå°é¦–é¡µâ€å’Œâ€œç”¨æˆ·ç®¡ç†é¡µâ€çš„ç¤ºæ„å›¾ï¼š

<img src="./resources/home.png" alt="layout" style="zoom:100%;" />

<img src="./resources/sys-user.png" alt="layout" style="zoom:100%;" />

> ğŸ’¡ æ”¹å˜ URL çš„ç‰‡æ®µé€šå¸¸å¯¹åº”äºç‰¹å®šçš„åµŒå¥—ç»„ä»¶ç»“æ„ï¼ŒURL ä¸­çš„ `/sys` ç‰‡æ®µæ ¹æ®ä¸šåŠ¡éœ€è¦ä¹Ÿå¯ä»¥æŒ‡å®šåµŒå¥—ç»„ä»¶ã€‚

## ğŸ¸ å‡†å¤‡

### è°ƒæ•´æ–‡ä»¶&ç›®å½•

åœ¨ `src` ç›®å½•ä¸‹åˆ›å»º `router` æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è·¯ç”±æ–‡ä»¶ã€‚

routeræ–‡ä»¶ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

ğŸ“ src

----ğŸ“ router

--------ğŸ“„ index.ts

<br/>

åœ¨ `/src/components` ç›®å½•ä¸‹åˆ›å»º `layout` æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å¸ƒå±€ç»„ä»¶ã€‚

componentsæ–‡ä»¶ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

ğŸ“ src

----ğŸ“ components

--------ğŸ“ layout

------------ğŸ“„ index.vue

--------ğŸ“ demos

------------ğŸ“„ Env.vue

------------ğŸ“„ Router.vue

> ğŸ’¡ Env.vue ç”± HelloWorld.vue é‡å‘½åã€‚demos ç›®å½•ä¸‹æ”¾çš„æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­çš„ç»„ä»¶ã€‚

<br/>

åœ¨ `src` ç›®å½•ä¸‹åˆ›å»º `views` æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è·¯ç”±æŒ‡å‘çš„è§†å›¾æ–‡ä»¶ï¼Œé€šä¿—çš„è®²å°±æ˜¯é¡µé¢ã€‚

viewsæ–‡ä»¶ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

----ğŸ“ views

--------ğŸ“ sys

------------ğŸ“„ User.vue

--------ğŸ“„ Home.vue

--------ğŸ“„ Login.vue

## ğŸŒˆ Coding

### åˆ›å»ºè·¯ç”±

åœ¨ `router/index.ts` ä¸­åˆ›å»ºè·¯ç”±å¯¹è±¡ï¼Œæ ¹è·¯ç”±æ·»åŠ  `redirect` å±æ€§ï¼Œå°†è¯·æ±‚é‡å®šå‘åˆ° /homeï¼Œ/homeæ·»åŠ åˆ«å `alias`ï¼Œåœ¨åœ°å€æ æ˜¾ç¤º /ã€‚ä»£ç å¦‚ä¸‹ï¼š

```typescript
import { createRouter, createWebHashHistory } from 'vue-router'

// â†“å®šä¹‰è·¯ç”±
const routes = [
  // â†“layoutçˆ¶è·¯ç”±
  {
    // â†“è·¯ç”±åœ°å€
    path: '/',
    // â†“è·¯ç”±åç§°ï¼ˆå”¯ä¸€å€¼ï¼‰ï¼Œåœ¨è·¯ç”±è·³è½¬æ—¶èƒ½ç”¨åˆ°
    name: '',
    // â†“è·¯ç”±æ¸²æŸ“ç»„ä»¶
    component: () => import('@/components/layout/index.vue'),
    // â†“é‡å®šå‘
    redirect: { name: 'home' },
    // â†“å­è·¯ç”±
    children: [
      // â†“é¦–é¡µ
      {
        path: '/home',
        name: 'home',
	      // â†“è·¯ç”±åˆ«å
  			alias: '/',
        component: () => import('@/views/Home.vue')
      },
      // â†“ç”¨æˆ·ç®¡ç†
      {
        path: '/sys/user',
        name: 'sys-user',
        component: () => import('@/views/sys/User.vue')
      },
    ]
  },
  // â†“ç™»å½•é¡µ
  {
    path: '/login',
    name: 'login',
    component: () => import('@/views/Login.vue')
  },
]

// â†“åˆ›å»ºè·¯ç”±å®ä¾‹å¹¶ä¼ é€’routes
const router = createRouter({
  // â†“routerå†…éƒ¨æä¾›äº†historyæ¨¡å¼çš„å®ç°ï¼Œä½¿ç”¨hashæ¨¡å¼
  history: createWebHashHistory(),
  routes,
})

export default router
```

> ğŸ’¡ login çš„å¸ƒå±€å’Œå…¶å®ƒé¡µé¢ä¸ç›¸åŒï¼Œæ‰€ä»¥ä¸è¦åµŒå¥—åˆ° layout è·¯ç”±ä¸­ã€‚

### ä½¿ç”¨è·¯ç”±

åœ¨ main.ts ä½¿ç”¨è·¯ç”±ï¼š

```typescript
import { createApp } from 'vue'
import App from './App.vue'
import router from './router/index'

createApp(App).use(router).mount('#app')
```

### æ€»è·¯ç”±è§†å›¾

åœ¨ `App.vue` ä¸­æ·»åŠ  `router-view` ï¼ŒåŒæ—¶åˆ é™¤å…¶å®ƒé¡µé¢å†…å®¹ï¼š

```vue
<template>
  <!-- â†“æ€»è·¯ç”±è§†å›¾ -->
  <router-view></router-view>
</template>

<script lang="ts">
import { defineComponent } from "vue";

export default defineComponent({
  name: "App",
});
</script>
```

### Loginé¡µé¢

Login ä¸ºéåµŒå¥—é¡µé¢ï¼Œç”¨æ¥åšå¯¹æ¯”ï¼Œä»£ç å¦‚ä¸‹ï¼š

```vue
<template>
  <h2>Login Page</h2>
  <router-link to="/">Go to Home</router-link>
</template>

<script lang="ts">
import { defineComponent } from "vue";

export default defineComponent({
  name: "Login",
});
</script>

```

### Layoutè·¯ç”±è§†å›¾

åœ¨ `components/layout/index.vue` ä¸­åŠ å…¥ `router-view` ã€‚ä»£ç å¦‚ä¸‹ï¼š

```vue
<template>
  <h2 class="red">å›ºå®šåŒºåŸŸ</h2>
  <!-- â†“layoutè·¯ç”±è§†å›¾ -->
  <router-view></router-view>
</template>

<script>
import '@/styles/index.scss'
import { defineComponent } from "vue";

export default defineComponent({
  name: "Layout",
});
</script>
```

> â€œå›ºå®šåŒºåŸŸâ€ ä»£è¡¨å¸ƒå±€ä¸­çš„ navbarã€sidebarã€footerã€‚

### åµŒå¥—é¡µé¢

è·¯ç”±é…ç½®ä¸­çš„è§†å›¾é¡µé¢æ˜¯ Home.vue å’Œ User.vueã€‚å°† Env.vue å’Œ Router.vue å¯¼å…¥ Home.vueã€‚`Home.vue` ä»£ç å¦‚ä¸‹ï¼š

```vue
<template>
  <Env />
  <Router />
</template>

<script lang="ts">
import { defineComponent } from "vue";
import Env from "@/components/demos/Env.vue";
import Router from "@/components/demos/Router.vue";

export default defineComponent({
  name: "Home",
  components: {
    Router,
    Env,
  },
});
</script>
```

<br/>

`User.vue` ä»£ç å¦‚ä¸‹ï¼š

```vue
<template>
  <h2>User Page</h2>
  <router-link to="/">Go to Home</router-link>
</template>

<script lang="ts">
import { defineComponent } from "vue";

export default defineComponent({
  name: "User",
});
</script>
```

### Demoç»„ä»¶

demoç»„ä»¶æ˜¯ Env.vue å’Œ Router.vueã€‚Env.vue å°±æ˜¯ä¹‹å‰çš„ HelloWorld.vue æ”¹äº†ä¸€ç‚¹ç‚¹ï¼šä¿®æ”¹äº†nameï¼Œå»æ‰äº† red æ ·å¼ã€‚`Env.vue` ä¸è´´ä»£ç äº†ã€‚

`Router.vue` ç”¨æ¥æµ‹è¯•è·¯ç”±è·³è½¬ï¼Œä»£ç å¦‚ä¸‹ï¼š

```vue
<template>
  <!-- â†“è·¯ç”±demo -->
  <div>
    <h2>è·¯ç”±</h2>
    <!-- â†“åŒ¹é…è·¯ç”±pathè¿›è¡Œè·³è½¬ -->
    <router-link to="/sys/user">Go to User</router-link> <br />
    <!-- â†“åŒ¹é…è·¯ç”±nameè¿›è¡Œè·³è½¬ -->
    <router-link :to="{ name: 'login' }">Go to Login</router-link>
  </div>
</template>

<script lang="ts">
import { defineComponent } from "vue";

export default defineComponent({
  name: "Router",
});
</script>
```

## ğŸ­ ç»“æœ

- æµè§ˆå™¨è®¿é—® `/` æ˜¾ç¤º `/home` é¡µé¢å†…å®¹ï¼Œä½†åœ°å€æ æ˜¾ç¤º `/` ã€‚
- åœ¨ /home å’Œ /sys/user ä¹‹é—´è·³è½¬ï¼Œå­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œlayout çˆ¶ç»„ä»¶ä¸å˜ã€‚
- è®¿é—® /login è·³å‡º layout ç»„ä»¶ã€‚